# 機能仕様書: bier.jp 検索機能

## 概要

bier.jpの検索機能は、ユーザーが様々な条件や方法でビールを検索できるようにするための機能群です。従来のキーワード検索に加え、ビールの特徴（香り、味、アルコール度数）による詳細検索、画像認識によるラベル検索、料理とのペアリング検索を提供します。

---

## 1. 詳細検索機能

### 1.1 機能概要

ビールの特徴（香り、味、アルコール度数）を条件として指定し、条件に合致する商品を絞り込む機能です。

### 1.2 検索条件

#### 香り（複数選択可）

| 選択肢 | 説明 |
|--------|------|
| 心地よい香り | バランスの取れた穏やかな香り |
| 柑橘系でさわやか | レモン、オレンジ、グレープフルーツなどの柑橘系 |
| フルーティー | リンゴ、バナナ、トロピカルフルーツなどの果実香 |
| スモーキー | 燻製や焦げたような香り |
| フローラル | 花のような華やかな香り |
| スパイシー | コリアンダー、クローブなどのスパイス香 |
| ロースト | コーヒー、チョコレートのような焙煎香 |
| ハーブ | ホップ由来のハーブ香 |
| ウッド | 樽熟成由来の木の香り |
| 酵母 | イースト由来の独特な香り |

#### 味（複数選択可）

| 選択肢 | 説明 |
|--------|------|
| 甘い | 麦芽由来の甘みが感じられる |
| 苦い | ホップ由来の苦味が強い |
| 酸味が強い | サワービールなどの酸味 |
| すっきり | 後味がクリアで爽快 |
| コクがある | 深みと複雑さがある |
| まろやか | 角がなく滑らかな味わい |
| ドライ | 甘みが少なく辛口 |
| フルボディ | 重厚で飲みごたえがある |
| ライトボディ | 軽やかで飲みやすい |

#### アルコール度数

- **入力方式**: 範囲指定（下限〜上限）
- **入力方法**:
  1. 数値入力フィールド（0〜100%）
  2. 上下ボタンによるスピナー（0〜20%、1%刻み）
- **特記**: 上限を空白にすると、指定した下限値のみで検索（完全一致）

### 1.3 UI仕様

#### モーダルダイアログ

| 要素 | 仕様 |
|------|------|
| 表示方法 | 「詳細検索を開く」ボタンクリックでオーバーレイ付きモーダル表示 |
| 閉じ方 | 右上の「X」ボタン、またはオーバーレイクリック |
| スクロール | モーダル表示中はページスクロール無効 |

#### 検索条件の選択UI

- **香り・味**: タグ形式のトグルボタン
  - 未選択時: 薄いグレーの枠線とテキスト
  - 選択時: 黒い枠線とテキスト、背景色変更
- **アルコール度数**: デュアル入力フィールド + スピナーUI

#### アクションボタン

| ボタン | 動作 |
|--------|------|
| クリア | すべての検索条件をリセット |
| 検索 | 選択した条件で検索を実行 |

---

## 2. ラベル画像検索機能

### 2.1 機能概要

ビールのラベル画像をアップロードし、画像認識技術を用いて同一または類似のビールを検索する機能です。

### 2.2 対応フォーマット

- 画像形式: JPEG, PNG, GIF, WebP
- 最大ファイルサイズ: 10MB（推奨）
- 推奨解像度: 500x500px以上

### 2.3 UI仕様

#### 画像アップロード

| 要素 | 仕様 |
|------|------|
| 入力方法 | ファイル選択ダイアログ |
| 受付形式 | `image/*`（すべての画像形式） |
| プレビュー | アップロード後、選択画像をプレビュー表示 |

#### 検索結果表示

- 検索中: 「検索中...」のローディング表示
- 完了時: マッチしたビールの情報を表示

### 2.4 想定される検索シナリオ

1. 店頭で見かけたビールの情報を調べたい
2. 過去に飲んだビールを再度購入したい
3. ラベルデザインが似たビールを探したい

---

## 3. フードペアリング検索機能

### 3.1 機能概要

料理のカテゴリを選択すると、その料理に合うビールスタイルを提案する機能です。

### 3.2 対応料理カテゴリ

| 料理 | 推奨ビールスタイル | ペアリング理由 |
|------|-------------------|---------------|
| ピザ | ピルスナー | さっぱりとした味わいがトマトソースとチーズの濃厚さを引き立てる |
| 寿司 | ホワイトエール | 繊細な魚の風味を邪魔しない軽やかな味わい |
| ステーキ | スタウト | 肉の旨味とローストモルトのコクが調和 |
| カレー | IPA | スパイシーな料理とホップの苦味が好相性 |
| チーズ | ペールエール | チーズの風味を引き立てるモルトの甘み |
| ハンバーガー | ラガー | クリーンな味わいが肉汁の旨味を引き立てる |

### 3.3 UI仕様

#### 料理選択

- 表示形式: ボタン形式で料理カテゴリを一覧表示
- 選択方法: シングルクリックで選択

#### 結果表示

- 選択した料理に合うビールスタイルを即座に表示
- 追加情報: なぜそのペアリングがおすすめかの説明（将来実装）

---

## 4. 共通仕様

### 4.1 レスポンシブ対応

- モバイル: シングルカラムレイアウト
- タブレット: 2カラムレイアウト
- デスクトップ: フルレイアウト

### 4.2 アクセシビリティ

- キーボード操作対応
- スクリーンリーダー対応（ARIA属性）
- コントラスト比 4.5:1 以上

### 4.3 エラーハンドリング

| エラー種別 | 表示メッセージ | 対応 |
|-----------|---------------|------|
| 画像未選択 | 「画像をアップロードしてください」 | アラート表示 |
| 検索結果なし | 「条件に合うビールが見つかりませんでした」 | 結果エリアに表示 |
| 通信エラー | 「通信エラーが発生しました。再度お試しください」 | 結果エリアに表示 |

---

## 5. 今後の拡張予定

1. **音声検索**: 音声入力でビールを検索
2. **AIレコメンド**: ユーザーの好みを学習し、パーソナライズされた提案
3. **バーコードスキャン**: 商品バーコードからの検索
4. **AR連携**: カメラでビールを認識し、AR情報を表示
